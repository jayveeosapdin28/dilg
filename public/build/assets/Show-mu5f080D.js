import{m as f,T as A,r as R,o as a,g as n,a as r,u as e,w as u,F as E,Q as _,Z as T,b as l,t as m,d as p,c as V,f as d}from"./app-DDm3ur_q.js";import{_ as U}from"./AuthenticatedLayout-8DZWhUx3.js";import{_ as j}from"./PageHeading-DVYt6gRm.js";import{u as H}from"./useRole-CIxqukLy.js";import{u as P}from"./useFormat-RxmIVP2I.js";import{_ as Q}from"./FileUploader-B6eYPYtr.js";import{u as Z}from"./useCrud-e9fVmAFn.js";import{_ as q}from"./DataTable-9lVUghE3.js";import{_ as z}from"./ActionDownload-BLaeBL3v.js";import"./useConfirmMessage-C-IUxGMr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-uTdHuEOZ.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";const G={class:"text-slate-500 space-y-1 mt-4 bg-white rounded-lg shadow-lg p-6"},I={key:0,class:"mt-8 bg-white rounded-lg shadow-lg p-6 h-full overflow-y-auto space-y-4"},J={class:"flex items-center"},K={class:"flex justify-end items-center"},L={key:1,class:"mt-8 bg-white rounded-lg shadow-lg p-6 space-y-4"},M=["href"],me={__name:"Show",setup(O){var b,y,k;const s=f(()=>_().props.data),$=f(()=>_().props.documents),h=f(()=>_().props.submitted),{hasRole:c}=H(),{date:v}=P(),{submitForm:x}=Z(),g=(b=s.value)==null?void 0:b.name,D=[{name:(y=s.value)==null?void 0:y.name,href:"#",current:!0}];let t=A({task_id:(k=s.value)==null?void 0:k.id,file:null,remove_file:null});const B=()=>{t.remove_file=!0},F=async()=>{await x(t,"admin.task.submit",null,!0,!0).then(()=>{t.reset()})},C=[{label:"Name",field:"name"},{label:"Action",field:"file_url",align:"right"}];return(N,i)=>{const S=R("VBtn");return a(),n(E,null,[r(e(T),{title:e(g)},null,8,["title"]),r(U,null,{default:u(()=>[r(j,{title:e(g),pages:D},null,8,["title"]),l("div",G,[l("p",null,m(s.value.description),1),l("p",null,[p("Priority: "),l("b",null,m(s.value.priority),1)]),l("p",null,[p("Due Date: "),l("b",null,m(e(v)(e(v).due_date)),1)])]),e(c)("Super Admin")||e(c)("Admin")?(a(),n("div",I,[r(q,{searchable:!1,class:"mb-12",columns:C,data:$.value,"filter-link":N.route("admin.tasks.show",s.value.id)},{column_name:u(({props:o})=>{var w;return[l("div",J,m((w=o.user)==null?void 0:w.name),1)]}),column_file_url:u(({props:o})=>[l("div",K,[o.file_url?(a(),V(z,{key:0,link:"",to:o.file_url},null,8,["to"])):d("",!0)])]),_:1},8,["data","filter-link"])])):d("",!0),e(c)("User")?(a(),n("div",L,[(a(),V(Q,{id:`${e(t).id}-id`,key:`${e(t).id}-key`,ref:"image_uploader",modelValue:e(t).file,"onUpdate:modelValue":[i[0]||(i[0]=o=>e(t).file=o),i[1]||(i[1]=o=>e(t).clearErrors("file"))],placeholder:"Drop or select document file here","model-files":e(t).file_url,onRemoveFile:B,"error-messages":e(t).errors.file},null,8,["id","modelValue","model-files","error-messages"])),l("div",null,[h.value?(a(),n("a",{key:0,class:"text-primary-500 hover:underline cursor-pointer",href:h.value.file_url,target:"_blank"},"Download your document",8,M)):d("",!0)]),r(S,{onClick:F,disabled:e(t).processing||!e(t).file,class:"",variant:"flat",color:"primary"},{default:u(()=>[p(" Submit Document ")]),_:1},8,["disabled"])])):d("",!0)]),_:1})],64)}}};export{me as default};
