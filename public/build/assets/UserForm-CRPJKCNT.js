import{m as f,T as E,q as w,r as p,o as F,g as N,a as s,u as r,w as m,F as B,Q as S,b as g,t as v,d as V}from"./app-Ds5rE3Vu.js";import{u as k}from"./useCrud-C_G_Mrml.js";import{L as T,N as j}from"./NavigationDrawer-BoBNGteH.js";import"./useConfirmMessage-s3JsARgk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"font-semibold text-lg"},D={class:"flex gap-4 justify-end"},Q={__name:"UserForm",props:{modelValue:[Boolean,String],storeId:[String,Number],data:Object},emits:["update:modelValue","close","on-success"],setup(b,{emit:c}){const t=b,y=f(()=>S().props.roles),i=c;let e=E({id:null,role:t.role,name:t.name,email:t.email,password:t.password,password_confirmation:t.password_confirmation});w(()=>t.data,a=>{e.id=a.id??null,e.role=a.role??null,e.name=a.name??null,e.email=a.email??null});const n=f({set:a=>{i("update:modelValue",a)},get:()=>t.modelValue}),{submitForm:C}=k(),U=async()=>{await C(e,`admin.users.${e.id?"update":"store"}`,null,!0,!0).then(a=>{i("on-success"),e.reset(),n.value=!1})},$=()=>{e.reset(),i("close")};return w(()=>n.value,()=>{n.value||e.reset()}),(a,o)=>{const x=p("VSelect"),d=p("VTextField"),u=p("VBtn");return F(),N(B,null,[s(T,{show:r(e).processing},null,8,["show"]),s(j,{class:"z-50",onClose:$,modelValue:n.value,"onUpdate:modelValue":o[12]||(o[12]=l=>n.value=l),size:"400"},{header:m(()=>[g("p",z,v(`${r(e).id?"Update":"Create"} User`),1)]),default:m(()=>[s(x,{color:"primary",label:"Role",variant:"outlined",density:"comfortable",items:y.value,modelValue:r(e).role,"onUpdate:modelValue":[o[0]||(o[0]=l=>r(e).role=l),o[1]||(o[1]=l=>r(e).clearErrors("role"))],"error-messages":r(e).errors.role},null,8,["items","modelValue","error-messages"]),s(d,{color:"primary",label:"Name",variant:"outlined",density:"comfortable",modelValue:r(e).name,"onUpdate:modelValue":[o[2]||(o[2]=l=>r(e).name=l),o[3]||(o[3]=l=>r(e).clearErrors("name"))],"error-messages":r(e).errors.name},null,8,["modelValue","error-messages"]),s(d,{color:"primary",label:"Email",variant:"outlined",density:"comfortable",modelValue:r(e).email,"onUpdate:modelValue":[o[4]||(o[4]=l=>r(e).email=l),o[5]||(o[5]=l=>r(e).clearErrors("email"))],"error-messages":r(e).errors.email},null,8,["modelValue","error-messages"]),s(d,{color:"primary",label:"Password",variant:"outlined",type:"password",density:"comfortable",modelValue:r(e).password,"onUpdate:modelValue":[o[6]||(o[6]=l=>r(e).password=l),o[7]||(o[7]=l=>r(e).clearErrors("password"))],"error-messages":r(e).errors.password},null,8,["modelValue","error-messages"]),s(d,{color:"primary",label:"Confirm Password",variant:"outlined",type:"password",density:"comfortable",modelValue:r(e).password_confirmation,"onUpdate:modelValue":[o[8]||(o[8]=l=>r(e).password_confirmation=l),o[9]||(o[9]=l=>r(e).clearErrors("password_confirmation"))],"error-messages":r(e).errors.password_confirmation},null,8,["modelValue","error-messages"])]),footer:m(()=>[g("div",D,[s(u,{color:"error",onClick:o[10]||(o[10]=l=>n.value=!1)},{default:m(()=>[V(" Close ")]),_:1}),s(u,{onClick:o[11]||(o[11]=l=>r(e).reset())},{default:m(()=>[V(" Clear Fields ")]),_:1}),s(u,{variant:"flat",color:"primary",onClick:U},{default:m(()=>[V(v(r(e).id?"Update":"Submit"),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}};export{Q as default};
