import{m as p,T as P,r as j,o,g as u,a as c,u as t,w as d,F as A,Q as h,Z as z,b as e,i as Q,d as a,t as i,c as H,f as v,n as Z}from"./app-wyvEKVqs.js";import{_ as q}from"./AuthenticatedLayout-B6CBpUQ4.js";import{u as G}from"./useRole-gy2WcH5o.js";import{u as J}from"./useFormat-gSL8o3NQ.js";import{_ as K}from"./FileUploader-B5yNu093.js";import{u as O}from"./useCrud-BtqAZ-RU.js";import{_ as W}from"./DataTable-BJUNLuNB.js";import"./useConfirmMessage-CbbOum34.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-CkXyQpRJ.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";import"./lodash-Dhc7DghO.js";const X={class:"pb-6"},Y=e("i",{class:"bi bi-chevron-left mr-1"},null,-1),ee={class:"h-full overflow-y-auto pb-24"},te={class:"max-w-5xl mx-auto px-6"},se={class:"font-semibold text-slate-800 text-4xl"},le={class:"text-slate-600 mt-4"},oe={class:"text-primary-400"},ae={class:"text-primary-400"},ie={class:"mt-12"},re=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Instructions:",-1),ne=["innerHTML"],de={key:0,class:"mt-16 h-full overflow-y-auto space-y-4"},me=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Submitters List:",-1),ue={class:"flex items-center"},ce={class:"flex justify-end items-center"},_e=["href","download"],fe=e("i",{class:"bi bi-download"},null,-1),pe={key:1,class:"mt-14 bg-white space-y-8"},he={key:0},ve=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"My work:",-1),be=["download","href"],ye={class:"bg-white rounded border border-primary-600 p-4 flex items-center gap-2"},xe={class:"text-primary-600"},Ae={__name:"Show",setup(ke){var k,w,g;const l=p(()=>h().props.data),b=p(()=>h().props.documents),r=p(()=>h().props.submitted),{hasRole:f}=G(),{date:y,mimeTypeIcon:L}=J(),{submitForm:M}=O(),x=(k=l.value)==null?void 0:k.name;(w=l.value)==null||w.name;let s=P({task_id:(g=l.value)==null?void 0:g.id,file:null,remove_file:null});const R=()=>{s.remove_file=!0},E=async()=>{await M(s,"admin.task.submit",null,!0,!0).then(()=>{s.reset()})},I=[{label:"Name",field:"name"},{label:"Action",field:"file_url",align:"right"}];return(V,_)=>{const C=j("VBtn");return o(),u(A,null,[c(t(z),{title:t(x)},null,8,["title"]),c(q,null,{default:d(()=>{var D,B,S,F,$,N,T;return[e("div",X,[c(t(Q),{href:V.route("admin.tasks.index")},{default:d(()=>[c(C,{variant:"outlined",color:"primary"},{default:d(()=>[Y,a(" Back ")]),_:1})]),_:1},8,["href"])]),e("div",ee,[e("div",te,[e("h2",se,i(t(x)),1),e("div",le,[e("p",null,[a("Posted Date: "),e("b",null,i(t(y)(l.value.created_at)),1)]),e("p",null,[a("Due Date: "),e("b",null,i(t(y)(l.value.due_date)),1)]),e("p",null,[a("Priority: "),e("b",oe,i(l.value.priority.toUpperCase()),1)]),e("p",null,[a("Status: "),e("b",ae,i((D=l.value.status)==null?void 0:D.toUpperCase()),1)])]),e("div",ie,[re,e("div",{class:"prose prose-slate",innerHTML:l.value.description},null,8,ne)]),t(f)("Super Admin")||t(f)("Admin")?(o(),u("div",de,[me,(B=b.value.data)!=null&&B.length?(o(),H(W,{key:0,searchable:!1,class:"mb-12",columns:I,data:b.value,"filter-link":V.route("admin.tasks.show",l.value.id)},{column_name:d(({props:n})=>{var m;return[e("div",ue,i((m=n.user)==null?void 0:m.name),1)]}),column_file_url:d(({props:n})=>{var m,U;return[e("div",ce,[e("a",{href:n.file_url,download:(U=(m=r.value)==null?void 0:m.file)==null?void 0:U.file_name,class:"flex gap-2 hover:bg-primary-600 hover:text-white items-center border border-primary-600 text-primary-600 px-3 py-1 rounded-full"},[fe,a(" Download ")],8,_e)])]}),_:1},8,["data","filter-link"])):v("",!0)])):v("",!0),t(f)("User")?(o(),u("div",pe,[r.value?(o(),u("div",he,[ve,e("a",{class:"text-primary-500 hover:underline cursor-pointer font-semibold",download:((F=(S=r.value)==null?void 0:S.file)==null?void 0:F.file_name)??"default",href:($=r.value)==null?void 0:$.file_url,target:"_blank"},[e("div",ye,[e("i",{class:Z([t(L)((N=r.value.file)==null?void 0:N.mime_type),"text-2xl text-primary-500"])},null,2),e("span",xe,i((T=r.value.file)==null?void 0:T.file_name),1)])],8,be)])):(o(),u(A,{key:1},[(o(),H(K,{id:`${t(s).id}-id`,key:`${t(s).id}-key`,ref:"image_uploader",modelValue:t(s).file,"onUpdate:modelValue":[_[0]||(_[0]=n=>t(s).file=n),_[1]||(_[1]=n=>t(s).clearErrors("file"))],placeholder:"Drop or select document file here","model-files":t(s).file_url,onRemoveFile:R,"error-messages":t(s).errors.file},null,8,["id","modelValue","model-files","error-messages"])),c(C,{onClick:E,disabled:t(s).processing||!t(s).file,class:"",variant:"flat",color:"primary"},{default:d(()=>[a(" Submit Document ")]),_:1},8,["disabled"])],64))])):v("",!0)])])]}),_:1})],64)}}};export{Ae as default};
