import{T as B,q as v,m as b,r as p,o as f,g as U,a as s,u as l,w as n,F as D,Q as T,b as c,t as y,c as _,d as V,f as E}from"./app-Ds5rE3Vu.js";import{u as S}from"./useCrud-C_G_Mrml.js";import{L as j,N as z}from"./NavigationDrawer-BoBNGteH.js";import{_ as I}from"./FileUploader-DQxJ-oNX.js";import"./useConfirmMessage-s3JsARgk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";const L={class:"font-semibold text-lg"},q={class:"mt-4"},O={class:"flex gap-4 justify-end"},M={__name:"DocumentForm",props:{modelValue:[Boolean,String],storeId:[String,Number],data:Object},emits:["update:modelValue","close","on-success"],setup(C,{emit:$}){const d=C,u=$;let e=B({id:null,name:d.storeId,category:null,description:null,file:null,user_id:null,file_url:null,remove_file:null});v(()=>d.data,t=>{e.id=t.id??null,e.name=t.name??null,e.user_id=t.user_id??null,e.category=t.category??null,e.description=t.description??null,e.file=t.file??null,e.file_url=t.file_url??null});const a=b({set:t=>{u("update:modelValue",t)},get:()=>d.modelValue}),{submitForm:x}=S(),k=async()=>{await x(e,`admin.documents.${e.id?"update":"store"}`,null,!0,!0).then(t=>{u("on-success"),e.reset(),a.value=!1})},F=()=>{e.reset(),u("close")},w=()=>{e.remove_file=!0};v(()=>a.value,()=>{a.value||e.reset()});const i=b(()=>e.user_id===T().props.auth.user.id&&e.id);return(t,o)=>{const g=p("VTextField"),N=p("VTextarea"),m=p("VBtn");return f(),U(D,null,[s(j,{show:l(e).processing},null,8,["show"]),s(z,{class:"z-50",onClose:F,modelValue:a.value,"onUpdate:modelValue":o[10]||(o[10]=r=>a.value=r),size:"400"},{header:n(()=>[c("p",L,y(`${l(e).id?"Update":"Create"} Document`),1)]),default:n(()=>[s(g,{color:"primary",label:"Name",disabled:!i.value,variant:"outlined",density:"comfortable",modelValue:l(e).name,"onUpdate:modelValue":[o[0]||(o[0]=r=>l(e).name=r),o[1]||(o[1]=r=>l(e).clearErrors("name"))],"error-messages":l(e).errors.name},null,8,["disabled","modelValue","error-messages"]),s(g,{color:"primary",label:"Category",disabled:!i.value,variant:"outlined",density:"comfortable",modelValue:l(e).category,"onUpdate:modelValue":[o[2]||(o[2]=r=>l(e).category=r),o[3]||(o[3]=r=>l(e).clearErrors("category"))],"error-messages":l(e).errors.category},null,8,["disabled","modelValue","error-messages"]),s(N,{color:"primary",label:"Description",variant:"outlined",disabled:!i.value,density:"comfortable",modelValue:l(e).description,"onUpdate:modelValue":[o[4]||(o[4]=r=>l(e).description=r),o[5]||(o[5]=r=>l(e).clearErrors("description"))],"error-messages":l(e).errors.description},null,8,["disabled","modelValue","error-messages"]),c("div",q,[(f(),_(I,{id:`${l(e).id}-id`,key:`${l(e).id}-key`,ref:"image_uploader",modelValue:l(e).file,"onUpdate:modelValue":[o[6]||(o[6]=r=>l(e).file=r),o[7]||(o[7]=r=>l(e).clearErrors("file"))],disabled:!i.value,placeholder:"Drop or select document file here","model-files":l(e).file_url,onRemoveFile:w,"error-messages":l(e).errors.file},null,8,["id","modelValue","disabled","model-files","error-messages"]))])]),footer:n(()=>[c("div",O,[s(m,{color:"error",onClick:o[8]||(o[8]=r=>a.value=!1)},{default:n(()=>[V(" Close ")]),_:1}),i.value?(f(),_(m,{key:0,onClick:o[9]||(o[9]=r=>l(e).reset())},{default:n(()=>[V(" Clear Fields ")]),_:1})):E("",!0),s(m,{variant:"flat",color:"primary",onClick:k},{default:n(()=>[V(y(l(e).id?"Update":"Submit"),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}};export{M as default};
