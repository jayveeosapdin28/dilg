import{m as f,T as M,r as R,o as l,g as d,a as m,u as t,w as r,F as T,Q as p,Z as E,b as e,i as I,d as n,t as a,c as F,f as h,n as K}from"./app-DruF8ZfE.js";import{_ as O}from"./AuthenticatedLayout-6LaKVH5Z.js";import{u as P}from"./useRole-TUEYSig5.js";import{u as Y}from"./useFormat-BdXiX6FE.js";import{_ as j}from"./FileUploader-COGagL1H.js";import{u as z}from"./useCrud-s0xWPI_X.js";import{_ as Q}from"./DataTable-Cewqam5l.js";import"./useConfirmMessage-CeUizKzx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-DbPbAUVG.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";import"./lodash-t_LACH2W.js";const Z={class:"pb-6"},q=e("i",{class:"bi bi-chevron-left mr-1"},null,-1),G={class:"h-full overflow-y-auto pb-24"},J={class:"max-w-5xl mx-auto px-6"},W={class:"font-semibold text-slate-800 text-4xl"},X={class:"text-slate-600 mt-4"},ee={class:"text-primary-400"},te={class:"text-primary-400"},se={class:"mt-12"},oe=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Instructions:",-1),le=["innerHTML"],ae={key:0,class:"mt-16 h-full overflow-y-auto space-y-4"},ie=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Submitters List:",-1),re={class:"flex items-center"},ne={class:"flex justify-end items-center"},de=["href"],me={key:1,class:"mt-14 bg-white space-y-8"},ue={key:0},ce=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"My work:",-1),_e=["href"],fe={class:"bg-white rounded border border-primary-600 p-4 flex items-center gap-2"},pe={class:"text-primary-600"},Ne={__name:"Show",setup(he){var x,k,g;const o=f(()=>p().props.data),v=f(()=>p().props.documents),u=f(()=>p().props.submitted),{hasRole:_}=P(),{date:b,mimeTypeIcon:$}=Y(),{submitForm:A}=z(),y=(x=o.value)==null?void 0:x.name;(k=o.value)==null||k.name;let s=M({task_id:(g=o.value)==null?void 0:g.id,file:null,remove_file:null});const U=()=>{s.remove_file=!0},H=async()=>{await A(s,"admin.task.submit",null,!0,!0).then(()=>{s.reset()})},L=[{label:"Name",field:"name"},{label:"Action",field:"file_url",align:"right"}];return(w,c)=>{const S=R("VBtn");return l(),d(T,null,[m(t(E),{title:t(y)},null,8,["title"]),m(O,null,{default:r(()=>{var V,C,B,D;return[e("div",Z,[m(t(I),{href:w.route("admin.tasks.index")},{default:r(()=>[m(S,{variant:"outlined",color:"primary"},{default:r(()=>[q,n(" Back ")]),_:1})]),_:1},8,["href"])]),e("div",G,[e("div",J,[e("h2",W,a(t(y)),1),e("div",X,[e("p",null,[n("Posted Date: "),e("b",null,a(t(b)(o.value.created_at)),1)]),e("p",null,[n("Due Date: "),e("b",null,a(t(b)(o.value.due_date)),1)]),e("p",null,[n("Priority: "),e("b",ee,a(o.value.priority.toUpperCase()),1)]),e("p",null,[n("Status: "),e("b",te,a((V=o.value.status)==null?void 0:V.toUpperCase()),1)])]),e("div",se,[oe,e("div",{class:"prose prose-slate",innerHTML:o.value.description},null,8,le)]),t(_)("Super Admin")||t(_)("Admin")?(l(),d("div",ae,[ie,(C=v.value.data)!=null&&C.length?(l(),F(Q,{key:0,searchable:!1,class:"mb-12",columns:L,data:v.value,"filter-link":w.route("admin.tasks.show",o.value.id)},{column_name:r(({props:i})=>{var N;return[e("div",re,a((N=i.user)==null?void 0:N.name),1)]}),column_file_url:r(({props:i})=>[e("div",ne,[e("a",{href:i.file_url,download:"SKYNOTA.docx"},null,8,de)])]),_:1},8,["data","filter-link"])):h("",!0)])):h("",!0),t(_)("User")?(l(),d("div",me,[u.value?(l(),d("div",ue,[ce,e("a",{class:"text-primary-500 hover:underline cursor-pointer font-semibold",download:"SKYNOTA.docx",href:u.value.file_url,target:"_blank"},[e("div",fe,[e("i",{class:K([t($)((B=u.value.file)==null?void 0:B.mime_type),"text-2xl text-primary-500"])},null,2),e("span",pe,a((D=u.value.file)==null?void 0:D.file_name),1)])],8,_e)])):(l(),d(T,{key:1},[(l(),F(j,{id:`${t(s).id}-id`,key:`${t(s).id}-key`,ref:"image_uploader",modelValue:t(s).file,"onUpdate:modelValue":[c[0]||(c[0]=i=>t(s).file=i),c[1]||(c[1]=i=>t(s).clearErrors("file"))],placeholder:"Drop or select document file here","model-files":t(s).file_url,onRemoveFile:U,"error-messages":t(s).errors.file},null,8,["id","modelValue","model-files","error-messages"])),m(S,{onClick:H,disabled:t(s).processing||!t(s).file,class:"",variant:"flat",color:"primary"},{default:r(()=>[n(" Submit Document ")]),_:1},8,["disabled"])],64))])):h("",!0)])])]}),_:1})],64)}}};export{Ne as default};
