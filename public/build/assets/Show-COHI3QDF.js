import{m as p,T as M,r as R,o,g as m,a as d,u as t,w as r,F as N,Q as h,Z as E,b as e,i as I,d as n,t as i,c as v,f as _,n as P}from"./app-Ds5rE3Vu.js";import{_ as j}from"./AuthenticatedLayout-CeD_MYB1.js";import{u as z}from"./useRole-B827n1v0.js";import{u as Q}from"./useFormat-DieTggQj.js";import{_ as Z}from"./FileUploader-DQxJ-oNX.js";import{u as q}from"./useCrud-C_G_Mrml.js";import{_ as G}from"./DataTable-rHSc5NqZ.js";import{_ as J}from"./ActionDownload-B-QqclRx.js";import"./useConfirmMessage-s3JsARgk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-mgV0WYhb.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";import"./lodash-B_KPkCMw.js";const K={class:"pb-12"},O=e("i",{class:"bi bi-chevron-left mr-1"},null,-1),W={class:"h-full overflow-y-auto pb-8"},X={class:"max-w-5xl mx-auto px-6"},Y={class:"font-semibold text-slate-800 text-4xl"},ee={class:"text-slate-600 mt-4"},te={class:"text-primary-400"},se={class:"text-primary-400"},le={class:"mt-12"},oe=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Instructions:",-1),ae=["innerHTML"],ie={key:0,class:"mt-16 h-full overflow-y-auto space-y-4"},re=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Submitters List:",-1),ne={class:"flex items-center"},me={class:"flex justify-end items-center"},de={key:1,class:"mt-14 bg-white space-y-8"},ue={key:0},ce=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"My work:",-1),_e=["href"],fe={class:"bg-white rounded border border-primary-600 p-4 flex items-center gap-2"},pe={class:"text-primary-600"},Fe={__name:"Show",setup(he){var k,g,w;const l=p(()=>h().props.data),b=p(()=>h().props.documents),u=p(()=>h().props.submitted),{hasRole:f}=z(),{date:y,mimeTypeIcon:T}=Q(),{submitForm:U}=q(),x=(k=l.value)==null?void 0:k.name;(g=l.value)==null||g.name;let s=M({task_id:(w=l.value)==null?void 0:w.id,file:null,remove_file:null});const A=()=>{s.remove_file=!0},H=async()=>{await U(s,"admin.task.submit",null,!0,!0).then(()=>{s.reset()})},L=[{label:"Name",field:"name"},{label:"Action",field:"file_url",align:"right"}];return(V,c)=>{const C=R("VBtn");return o(),m(N,null,[d(t(E),{title:t(x)},null,8,["title"]),d(j,null,{default:r(()=>{var B,D,S,$;return[e("div",K,[d(t(I),{href:V.route("admin.tasks.index")},{default:r(()=>[d(C,{variant:"outlined",color:"primary"},{default:r(()=>[O,n(" Back ")]),_:1})]),_:1},8,["href"])]),e("div",W,[e("div",X,[e("h2",Y,i(t(x)),1),e("div",ee,[e("p",null,[n("Posted Date: "),e("b",null,i(t(y)(l.value.created_at)),1)]),e("p",null,[n("Due Date: "),e("b",null,i(t(y)(l.value.due_date)),1)]),e("p",null,[n("Priority: "),e("b",te,i(l.value.priority.toUpperCase()),1)]),e("p",null,[n("Status: "),e("b",se,i((B=l.value.status)==null?void 0:B.toUpperCase()),1)])]),e("div",le,[oe,e("div",{class:"prose prose-slate",innerHTML:l.value.description},null,8,ae)]),t(f)("Super Admin")||t(f)("Admin")?(o(),m("div",ie,[re,(D=b.value.data)!=null&&D.length?(o(),v(G,{key:0,searchable:!1,class:"mb-12",columns:L,data:b.value,"filter-link":V.route("admin.tasks.show",l.value.id)},{column_name:r(({props:a})=>{var F;return[e("div",ne,i((F=a.user)==null?void 0:F.name),1)]}),column_file_url:r(({props:a})=>[e("div",me,[a.file_url?(o(),v(J,{key:0,link:"",to:a.file_url},null,8,["to"])):_("",!0)])]),_:1},8,["data","filter-link"])):_("",!0)])):_("",!0),t(f)("User")?(o(),m("div",de,[u.value?(o(),m("div",ue,[ce,e("a",{class:"text-primary-500 hover:underline cursor-pointer font-semibold",href:u.value.file_url,target:"_blank"},[e("div",fe,[e("i",{class:P([t(T)((S=u.value.file)==null?void 0:S.mime_type),"text-2xl text-primary-500"])},null,2),e("span",pe,i(($=u.value.file)==null?void 0:$.file_name),1)])],8,_e)])):(o(),m(N,{key:1},[(o(),v(Z,{id:`${t(s).id}-id`,key:`${t(s).id}-key`,ref:"image_uploader",modelValue:t(s).file,"onUpdate:modelValue":[c[0]||(c[0]=a=>t(s).file=a),c[1]||(c[1]=a=>t(s).clearErrors("file"))],placeholder:"Drop or select document file here","model-files":t(s).file_url,onRemoveFile:A,"error-messages":t(s).errors.file},null,8,["id","modelValue","model-files","error-messages"])),d(C,{onClick:H,disabled:t(s).processing||!t(s).file,class:"",variant:"flat",color:"primary"},{default:r(()=>[n(" Submit Document ")]),_:1},8,["disabled"])],64))])):_("",!0)])])]}),_:1})],64)}}};export{Fe as default};
