import{m as p,T as M,r as R,o,g as i,a as f,u as t,w as d,F as B,Q as h,Z as E,b as e,t as r,d as n,c as v,f as c,n as I}from"./app-C9HRCpWf.js";import{_ as P}from"./AuthenticatedLayout-CakPemaf.js";import{u as j}from"./useRole-B1_WBVX9.js";import{u as z}from"./useFormat-BgPlEN9p.js";import{_ as Q}from"./FileUploader-C2Da5H6F.js";import{u as Z}from"./useCrud-BWhZUWAg.js";import{_ as q}from"./DataTable-DZ04GuYw.js";import{_ as G}from"./ActionDownload-3NZmxWDR.js";import"./useConfirmMessage-BgYMZEU1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-9q3A0aUJ.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";import"./lodash-C8BZG0yE.js";const J={class:"h-full overflow-y-auto pb-8"},K={class:"max-w-5xl mx-auto px-6"},O={class:"font-semibold text-slate-800 text-4xl"},W={class:"text-slate-600 mt-4"},X={class:"text-primary-400"},Y={class:"text-primary-400"},ee={class:"mt-12"},te=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Instructions:",-1),se=["innerHTML"],le={key:0,class:"mt-16 h-full overflow-y-auto space-y-4"},oe=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Submitters List:",-1),ae={class:"flex items-center"},re={class:"flex justify-end items-center"},ie={key:1,class:"mt-14 bg-white space-y-8"},ne={key:0},me=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"My work:",-1),ue=["href"],de={class:"bg-white rounded border border-primary-600 p-4 flex items-center gap-2"},ce={class:"text-primary-600"},Se={__name:"Show",setup(_e){var k,g,w;const l=p(()=>h().props.data),b=p(()=>h().props.documents),m=p(()=>h().props.submitted),{hasRole:_}=j(),{date:y,mimeTypeIcon:F}=z(),{submitForm:N}=Z(),x=(k=l.value)==null?void 0:k.name;(g=l.value)==null||g.name;let s=M({task_id:(w=l.value)==null?void 0:w.id,file:null,remove_file:null});const T=()=>{s.remove_file=!0},U=async()=>{await N(s,"admin.task.submit",null,!0,!0).then(()=>{s.reset()})},A=[{label:"Name",field:"name"},{label:"Action",field:"file_url",align:"right"}];return(H,u)=>{const L=R("VBtn");return o(),i(B,null,[f(t(E),{title:t(x)},null,8,["title"]),f(P,null,{default:d(()=>{var V,C,D,S;return[e("div",J,[e("div",K,[e("h2",O,r(t(x)),1),e("div",W,[e("p",null,[n("Posted Date: "),e("b",null,r(t(y)(l.value.created_at)),1)]),e("p",null,[n("Due Date: "),e("b",null,r(t(y)(l.value.due_date)),1)]),e("p",null,[n("Priority: "),e("b",X,r(l.value.priority.toUpperCase()),1)]),e("p",null,[n("Status: "),e("b",Y,r((V=l.value.status)==null?void 0:V.toUpperCase()),1)])]),e("div",ee,[te,e("div",{class:"prose prose-slate",innerHTML:l.value.description},null,8,se)]),t(_)("Super Admin")||t(_)("Admin")?(o(),i("div",le,[oe,(C=b.value.data)!=null&&C.length?(o(),v(q,{key:0,searchable:!1,class:"mb-12",columns:A,data:b.value,"filter-link":H.route("admin.tasks.show",l.value.id)},{column_name:d(({props:a})=>{var $;return[e("div",ae,r(($=a.user)==null?void 0:$.name),1)]}),column_file_url:d(({props:a})=>[e("div",re,[a.file_url?(o(),v(G,{key:0,link:"",to:a.file_url},null,8,["to"])):c("",!0)])]),_:1},8,["data","filter-link"])):c("",!0)])):c("",!0),t(_)("User")?(o(),i("div",ie,[m.value?(o(),i("div",ne,[me,e("a",{class:"text-primary-500 hover:underline cursor-pointer font-semibold",href:m.value.file_url,target:"_blank"},[e("div",de,[e("i",{class:I([t(F)((D=m.value.file)==null?void 0:D.mime_type),"text-2xl text-primary-500"])},null,2),e("span",ce,r((S=m.value.file)==null?void 0:S.file_name),1)])],8,ue)])):(o(),i(B,{key:1},[(o(),v(Q,{id:`${t(s).id}-id`,key:`${t(s).id}-key`,ref:"image_uploader",modelValue:t(s).file,"onUpdate:modelValue":[u[0]||(u[0]=a=>t(s).file=a),u[1]||(u[1]=a=>t(s).clearErrors("file"))],placeholder:"Drop or select document file here","model-files":t(s).file_url,onRemoveFile:T,"error-messages":t(s).errors.file},null,8,["id","modelValue","model-files","error-messages"])),f(L,{onClick:U,disabled:t(s).processing||!t(s).file,class:"",variant:"flat",color:"primary"},{default:d(()=>[n(" Submit Document ")]),_:1},8,["disabled"])],64))])):c("",!0)])])]}),_:1})],64)}}};export{Se as default};
