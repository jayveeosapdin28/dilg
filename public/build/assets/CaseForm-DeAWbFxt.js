import{T as U,q as V,m as k,r as m,o as f,g as w,a as l,u as t,w as d,F as B,b as g,t as b,c as F,f as E,d as c}from"./app-My8rjfsu.js";import{u as T}from"./useCrud-BtQ1hKPU.js";import{L as O,N as D}from"./NavigationDrawer-B7i0DcYE.js";import{u as j}from"./useRole-BM8jtJZ0.js";import"./useConfirmMessage-E0_DeeMv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"font-semibold text-lg"},A={class:"flex gap-4 justify-end"},G={__name:"CaseForm",props:{modelValue:[Boolean,String],storeId:[String,Number],data:Object},emits:["update:modelValue","close","on-success"],setup(v,{emit:y}){const a=v,{isInRole:C}=j(),i=y;let e=U({id:null,name:a.name,description:a.description,date_open:a.date_open,date_closed:a.date_closed,status:a.status});V(()=>a.data,r=>{e.id=r.id??null,e.name=r.name??null,e.description=r.description??null,e.date_open=r.date_open??null,e.date_closed=r.date_closed??null,e.status=r.status??null});const n=k({set:r=>{i("update:modelValue",r)},get:()=>a.modelValue}),{submitForm:_}=T(),x=async()=>{await _(e,`admin.cases.${e.id?"update":"store"}`,null,!0,!0).then(r=>{i("on-success"),e.reset(),n.value=!1})},$=()=>{e.reset(),i("close")};return V(()=>n.value,()=>{n.value||e.reset()}),(r,o)=>{const u=m("VTextField"),N=m("VTextarea"),S=m("VSelect"),p=m("VBtn");return f(),w(B,null,[l(O,{show:t(e).processing},null,8,["show"]),l(D,{class:"z-50",onClose:$,modelValue:n.value,"onUpdate:modelValue":o[12]||(o[12]=s=>n.value=s),size:"400"},{header:d(()=>[g("p",z,b(`${t(e).id?"Update":"Create"} Case`),1)]),default:d(()=>[l(u,{color:"primary",label:"Name",variant:"outlined",density:"comfortable",modelValue:t(e).name,"onUpdate:modelValue":[o[0]||(o[0]=s=>t(e).name=s),o[1]||(o[1]=s=>t(e).clearErrors("name"))],"error-messages":t(e).errors.name},null,8,["modelValue","error-messages"]),l(u,{color:"primary",label:"Open",variant:"outlined",type:"date",density:"comfortable",modelValue:t(e).date_open,"onUpdate:modelValue":[o[2]||(o[2]=s=>t(e).date_open=s),o[3]||(o[3]=s=>t(e).clearErrors("date_open"))],"error-messages":t(e).errors.date_open},null,8,["modelValue","error-messages"]),l(u,{color:"primary",label:"Close",type:"date",variant:"outlined",density:"comfortable",modelValue:t(e).date_closed,"onUpdate:modelValue":[o[4]||(o[4]=s=>t(e).date_closed=s),o[5]||(o[5]=s=>t(e).clearErrors("date_closed"))],"error-messages":t(e).errors.date_closed},null,8,["modelValue","error-messages"]),l(N,{color:"primary",label:"Description",variant:"outlined",density:"comfortable",modelValue:t(e).description,"onUpdate:modelValue":[o[6]||(o[6]=s=>t(e).description=s),o[7]||(o[7]=s=>t(e).clearErrors("description"))],"error-messages":t(e).errors.description},null,8,["modelValue","error-messages"]),t(e).id&&t(C)(["Admin","Super Admin"])?(f(),F(S,{key:0,color:"primary",label:"Status",variant:"outlined",density:"comfortable",items:["Open","On Process","Hold","Closed"],modelValue:t(e).status,"onUpdate:modelValue":[o[8]||(o[8]=s=>t(e).status=s),o[9]||(o[9]=s=>t(e).clearErrors("status"))],"error-messages":t(e).errors.status},null,8,["modelValue","error-messages"])):E("",!0)]),footer:d(()=>[g("div",A,[l(p,{color:"error",onClick:o[10]||(o[10]=s=>n.value=!1)},{default:d(()=>[c(" Close ")]),_:1}),l(p,{onClick:o[11]||(o[11]=s=>t(e).reset())},{default:d(()=>[c(" Clear Fields ")]),_:1}),l(p,{variant:"flat",color:"primary",onClick:x},{default:d(()=>[c(b(t(e).id?"Update":"Submit"),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}};export{G as default};
