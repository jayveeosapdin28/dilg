import{m as g,T as F,q as y,r as i,o as U,g as _,a as l,u as r,w as n,F as N,Q as B,b as m,t as v,d as V}from"./app-0ulx3mdL.js";import{u as D}from"./useCrud-BylHJPqS.js";import{L as S,N as I}from"./NavigationDrawer-BDz-vOUA.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as L}from"./Editor-Bt0oRe_c.js";import{u as M}from"./useFormat-2tOo5Ush.js";import"./useConfirmMessage-HwLFYVpn.js";import"./InputLabel-W3pSGB1j.js";import"./dayjs.min-D5QpqLHd.js";const j={class:"font-semibold text-lg"},q={class:"grid md:grid-cols-2 gap-4"},z={class:"grid md:grid-cols-2 gap-4"},A={class:"flex gap-4 justify-end"},H={__name:"TaskForm",props:{modelValue:[Boolean,String],storeId:[String,Number],data:Object},emits:["update:modelValue","close","on-success"],setup(b,{emit:C}){const d=b,u=C,x=g(()=>B().props.users),{date:w}=M();let e=F({id:null,name:d.storeId,description:null,due_date:null,priority:null,status:null,users:null,comments:null});y(()=>d.data,t=>{e.id=t.id??null,e.name=t.name??null,e.description=t.description??null,e.due_date=w(t.due_date,"YYYY-MM-DD")??null,e.priority=t.priority??null,e.status=t.status??null,e.users=t.users??null,e.comments=t.comments??null});const a=g({set:t=>{u("update:modelValue",t)},get:()=>d.modelValue}),{submitForm:T}=D(),$=async()=>{await T(e,`admin.tasks.${e.id?"update":"store"}`,null,!0,!0).then(t=>{u("on-success"),e.reset(),a.value=!1})},k=()=>{e.reset(),u("close")};return y(()=>a.value,()=>{a.value||e.reset()}),(t,o)=>{const c=i("VTextField"),f=i("VSelect"),E=i("VTextarea"),p=i("VBtn");return U(),_(N,null,[l(S,{show:r(e).processing},null,8,["show"]),l(I,{class:"z-50",onClose:k,modelValue:a.value,"onUpdate:modelValue":o[14]||(o[14]=s=>a.value=s),width:"900"},{header:n(()=>[m("p",j,v(`${r(e).id?"Update":"Create"} Task`),1)]),default:n(()=>[m("div",q,[l(c,{color:"primary",label:"Name",class:"w-full",variant:"outlined",density:"comfortable",modelValue:r(e).name,"onUpdate:modelValue":[o[0]||(o[0]=s=>r(e).name=s),o[1]||(o[1]=s=>r(e).clearErrors("name"))],"error-messages":r(e).errors.name},null,8,["modelValue","error-messages"]),l(c,{type:"date",label:"Due Date",variant:"outlined",density:"comfortable",modelValue:r(e).due_date,"onUpdate:modelValue":[o[2]||(o[2]=s=>r(e).due_date=s),o[3]||(o[3]=s=>r(e).clearErrors("due_date"))],"error-messages":r(e).errors.due_date},null,8,["modelValue","error-messages"])]),m("div",z,[l(f,{color:"primary",label:"Priority",variant:"outlined",density:"comfortable",items:["Low","Medium","High"],modelValue:r(e).priority,"onUpdate:modelValue":[o[4]||(o[4]=s=>r(e).priority=s),o[5]||(o[5]=s=>r(e).clearErrors("priority"))],"error-messages":r(e).errors.priority},null,8,["modelValue","error-messages"]),l(f,{color:"primary",label:"Assign To",multiple:"","closable-chips":"",chips:"",variant:"outlined",density:"comfortable",items:x.value,"item-value":"id","item-title":"name",modelValue:r(e).users,"onUpdate:modelValue":[o[6]||(o[6]=s=>r(e).users=s),o[7]||(o[7]=s=>r(e).clearErrors("users"))],"error-messages":r(e).errors.users},null,8,["items","modelValue","error-messages"])]),l(L,{label:"Instructions",modelValue:r(e).description,"onUpdate:modelValue":[o[8]||(o[8]=s=>r(e).description=s),o[9]||(o[9]=s=>r(e).clearErrors("description"))],error:r(e).errors.description},null,8,["modelValue","error"]),l(E,{color:"primary",label:"Comments",variant:"outlined",density:"comfortable",modelValue:r(e).comments,"onUpdate:modelValue":[o[10]||(o[10]=s=>r(e).comments=s),o[11]||(o[11]=s=>r(e).clearErrors("comments"))],"error-messages":r(e).errors.comments},null,8,["modelValue","error-messages"])]),footer:n(()=>[m("div",A,[l(p,{color:"error",onClick:o[12]||(o[12]=s=>a.value=!1)},{default:n(()=>[V(" Close ")]),_:1}),l(p,{onClick:o[13]||(o[13]=s=>r(e).reset())},{default:n(()=>[V(" Clear Fields ")]),_:1}),l(p,{variant:"flat",color:"primary",onClick:$},{default:n(()=>[V(v(r(e).id?"Update":"Submit"),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}},h=Y(H,[["__scopeId","data-v-e8e98dfc"]]);export{h as default};
