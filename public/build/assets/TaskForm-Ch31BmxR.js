import{m as g,T as w,q as y,r as m,o as F,g as E,a as l,u as o,w as n,F as N,Q as B,b,t as v,d as p}from"./app-CKE0wOnX.js";import{u as S}from"./useCrud-CooyZmat.js";import{L as D,N as _}from"./NavigationDrawer-CIBYWKtk.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useConfirmMessage-DLEjWJ4x.js";const L={class:"font-semibold text-lg"},j={class:"flex gap-4 justify-end"},z={__name:"TaskForm",props:{modelValue:[Boolean,String],storeId:[String,Number],data:Object},emits:["update:modelValue","close","on-success"],setup(C,{emit:x}){const i=C,u=x,T=g(()=>B().props.users);let e=w({id:null,name:i.storeId,description:null,due_date:null,priority:null,status:null,users:null,comments:null});y(()=>i.data,t=>{e.id=t.id??null,e.name=t.name??null,e.description=t.description??null,e.due_date=t.due_date??null,e.priority=t.priority??null,e.status=t.status??null,e.users=t.users??null,e.comments=t.comments??null});const a=g({set:t=>{u("update:modelValue",t)},get:()=>i.modelValue}),{submitForm:$}=S(),k=async()=>{await $(e,`admin.tasks.${e.id?"update":"store"}`,null,!0,!0).then(t=>{u("on-success"),e.reset(),a.value=!1})},U=()=>{e.reset(),u("close")};return y(()=>a.value,()=>{a.value||e.reset()}),(t,r)=>{const V=m("VTextField"),c=m("VSelect"),f=m("VTextarea"),d=m("VBtn");return F(),E(N,null,[l(D,{show:o(e).processing},null,8,["show"]),l(_,{class:"z-50",onClose:U,modelValue:a.value,"onUpdate:modelValue":r[14]||(r[14]=s=>a.value=s),size:"400"},{header:n(()=>[b("p",L,v(`${o(e).id?"Update":"Create"} Task`),1)]),default:n(()=>[l(V,{color:"primary",label:"Name",variant:"outlined",density:"comfortable",modelValue:o(e).name,"onUpdate:modelValue":[r[0]||(r[0]=s=>o(e).name=s),r[1]||(r[1]=s=>o(e).clearErrors("name"))],"error-messages":o(e).errors.name},null,8,["modelValue","error-messages"]),l(V,{type:"date",label:"Due Date",variant:"outlined",density:"comfortable",modelValue:o(e).due_date,"onUpdate:modelValue":[r[2]||(r[2]=s=>o(e).due_date=s),r[3]||(r[3]=s=>o(e).clearErrors("due_date"))],"error-messages":o(e).errors.due_date},null,8,["modelValue","error-messages"]),l(c,{color:"primary",label:"Priority",variant:"outlined",density:"comfortable",items:["Low","Medium","High"],modelValue:o(e).priority,"onUpdate:modelValue":[r[4]||(r[4]=s=>o(e).priority=s),r[5]||(r[5]=s=>o(e).clearErrors("priority"))],"error-messages":o(e).errors.priority},null,8,["modelValue","error-messages"]),l(c,{color:"primary",label:"Assign To",multiple:"","closable-chips":"",chips:"",variant:"outlined",density:"comfortable",items:T.value,"item-value":"id","item-title":"name",modelValue:o(e).users,"onUpdate:modelValue":[r[6]||(r[6]=s=>o(e).users=s),r[7]||(r[7]=s=>o(e).clearErrors("users"))],"error-messages":o(e).errors.users},null,8,["items","modelValue","error-messages"]),l(f,{color:"primary",label:"Description",variant:"outlined",density:"comfortable",modelValue:o(e).description,"onUpdate:modelValue":[r[8]||(r[8]=s=>o(e).description=s),r[9]||(r[9]=s=>o(e).clearErrors("description"))],"error-messages":o(e).errors.description},null,8,["modelValue","error-messages"]),l(f,{color:"primary",label:"Comments",variant:"outlined",density:"comfortable",modelValue:o(e).comments,"onUpdate:modelValue":[r[10]||(r[10]=s=>o(e).comments=s),r[11]||(r[11]=s=>o(e).clearErrors("comments"))],"error-messages":o(e).errors.comments},null,8,["modelValue","error-messages"])]),footer:n(()=>[b("div",j,[l(d,{color:"error",onClick:r[12]||(r[12]=s=>a.value=!1)},{default:n(()=>[p(" Close ")]),_:1}),l(d,{onClick:r[13]||(r[13]=s=>o(e).reset())},{default:n(()=>[p(" Clear Fields ")]),_:1}),l(d,{variant:"flat",color:"primary",onClick:k},{default:n(()=>[p(v(o(e).id?"Update":"Submit"),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}},Q=I(z,[["__scopeId","data-v-5c2d4227"]]);export{Q as default};
