import{m as c,T as S,q as V,r as d,o as _,g as $,a,u as s,w as n,F as k,Q as F,b as g,t as f,d as p}from"./app-0ulx3mdL.js";import{u as U}from"./useCrud-BylHJPqS.js";import{L as T,N as E}from"./NavigationDrawer-BDz-vOUA.js";import"./useConfirmMessage-HwLFYVpn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"font-semibold text-lg"},z={class:"flex gap-4 justify-end"},O={__name:"ChatForm",props:{modelValue:[Boolean,String],storeId:[String,Number],data:Object},emits:["update:modelValue","close","on-success"],setup(v,{emit:C}){const i=v,m=C,b=c(()=>F().props.users);let e=S({id:null,recipient:i.storeId,message:null});V(()=>i.data,l=>{e.id=l.id??null,e.name=l.name??null});const r=c({set:l=>{m("update:modelValue",l)},get:()=>i.modelValue}),{submitForm:w}=U(),x=async()=>{await w(e,`admin.chat-rooms.${e.id?"update":"store"}`,null,!0,!0).then(l=>{m("on-success"),e.reset(),r.value=!1})},y=()=>{e.reset(),m("close")};return V(()=>r.value,()=>{r.value||e.reset()}),(l,t)=>{const B=d("VSelect"),N=d("VTextarea"),u=d("VBtn");return _(),$(k,null,[a(T,{show:s(e).processing},null,8,["show"]),a(E,{class:"z-50",onClose:y,modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=o=>r.value=o),size:"400"},{header:n(()=>[g("p",j,f(`${s(e).id?"Update":"Create"} Message`),1)]),default:n(()=>[a(B,{label:"Recipient","item-title":"name","item-value":"id",variant:"outlined",color:"primary",items:b.value,modelValue:s(e).recipient,"onUpdate:modelValue":[t[0]||(t[0]=o=>s(e).recipient=o),t[1]||(t[1]=o=>s(e).clearErrors("recipient"))],"error-messages":s(e).errors.recipient},null,8,["items","modelValue","error-messages"]),a(N,{color:"primary",label:"Message",rows:"4",variant:"outlined",density:"comfortable",modelValue:s(e).message,"onUpdate:modelValue":[t[2]||(t[2]=o=>s(e).message=o),t[3]||(t[3]=o=>s(e).clearErrors("message"))],"error-messages":s(e).errors.message},null,8,["modelValue","error-messages"])]),footer:n(()=>[g("div",z,[a(u,{color:"error",onClick:t[4]||(t[4]=o=>r.value=!1)},{default:n(()=>[p(" Close ")]),_:1}),a(u,{onClick:t[5]||(t[5]=o=>s(e).reset())},{default:n(()=>[p(" Clear Fields ")]),_:1}),a(u,{variant:"flat",color:"primary",onClick:x},{default:n(()=>[p(f(s(e).id?"Update":"Send"),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}};export{O as default};
