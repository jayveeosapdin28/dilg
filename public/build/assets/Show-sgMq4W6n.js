import{m as p,T as R,r as E,o,g as u,a as c,u as t,w as d,F as N,Q as h,Z as I,b as e,i as P,d as a,t as i,c as T,f as v,n as j}from"./app-0ulx3mdL.js";import{_ as z}from"./AuthenticatedLayout-DA-dnKQQ.js";import{u as Q}from"./useRole-VuwS27Pj.js";import{u as Z}from"./useFormat-2tOo5Ush.js";import{_ as q}from"./FileUploader-BTF3MDc7.js";import{u as G}from"./useCrud-BylHJPqS.js";import{_ as J}from"./DataTable-DXFSVyT-.js";import"./useConfirmMessage-HwLFYVpn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-D5QpqLHd.js";import"./filepond-plugin-image-preview.esm-CI_uTiYr.js";import"./lodash-DHUF7n_M.js";const K={class:"pb-6"},O=e("i",{class:"bi bi-chevron-left mr-1"},null,-1),W={class:"h-full overflow-y-auto pb-24"},X={class:"max-w-5xl mx-auto px-6"},Y={class:"font-semibold text-slate-800 text-4xl"},ee={class:"text-slate-600 mt-4"},te={class:"text-primary-400"},se={class:"text-primary-400"},le={class:"mt-12"},oe=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Instructions:",-1),ae=["innerHTML"],ie={key:0,class:"mt-16 h-full overflow-y-auto space-y-4"},re=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"Submitters List:",-1),ne={class:"flex items-center"},de={class:"flex justify-end items-center"},me=["href","download"],ue=e("i",{class:"bi bi-download"},null,-1),ce={key:1,class:"mt-14 bg-white space-y-8"},_e={key:0},fe=e("h2",{class:"text-primary-400 mb-4 font-semibold"},"My work:",-1),pe=["download","href"],he={class:"bg-white rounded border border-primary-600 p-4 flex items-center gap-2"},ve={class:"text-primary-600"},Ne={__name:"Show",setup(be){var k,w,g;const l=p(()=>h().props.data),b=p(()=>h().props.documents),r=p(()=>h().props.submitted),{hasRole:f}=Q(),{date:y,mimeTypeIcon:U}=Z(),{submitForm:A}=G(),x=(k=l.value)==null?void 0:k.name;(w=l.value)==null||w.name;let s=R({task_id:(g=l.value)==null?void 0:g.id,file:null,remove_file:null});const H=()=>{s.remove_file=!0},L=async()=>{await A(s,"admin.task.submit",null,!0,!0).then(()=>{s.reset()})},M=[{label:"Name",field:"name"},{label:"Action",field:"file_url",align:"right"}];return(V,_)=>{const C=E("VBtn");return o(),u(N,null,[c(t(I),{title:t(x)},null,8,["title"]),c(z,null,{default:d(()=>{var D,B,S,F,$;return[e("div",K,[c(t(P),{href:V.route("admin.tasks.index")},{default:d(()=>[c(C,{variant:"outlined",color:"primary"},{default:d(()=>[O,a(" Back ")]),_:1})]),_:1},8,["href"])]),e("div",W,[e("div",X,[e("h2",Y,i(t(x)),1),e("div",ee,[e("p",null,[a("Posted Date: "),e("b",null,i(t(y)(l.value.created_at)),1)]),e("p",null,[a("Due Date: "),e("b",null,i(t(y)(l.value.due_date)),1)]),e("p",null,[a("Priority: "),e("b",te,i(l.value.priority.toUpperCase()),1)]),e("p",null,[a("Status: "),e("b",se,i((D=l.value.status)==null?void 0:D.toUpperCase()),1)])]),e("div",le,[oe,e("div",{class:"prose prose-slate",innerHTML:l.value.description},null,8,ae)]),t(f)("Super Admin")||t(f)("Admin")?(o(),u("div",ie,[re,(B=b.value.data)!=null&&B.length?(o(),T(J,{key:0,searchable:!1,class:"mb-12",columns:M,data:b.value,"filter-link":V.route("admin.tasks.show",l.value.id)},{column_name:d(({props:n})=>{var m;return[e("div",ne,i((m=n.user)==null?void 0:m.name),1)]}),column_file_url:d(({props:n})=>{var m;return[e("div",de,[e("a",{href:n.file_url,download:(m=r.value.file)==null?void 0:m.file_name,class:"flex gap-2 hover:bg-primary-600 hover:text-white items-center border border-primary-600 text-primary-600 px-3 py-1 rounded-full"},[ue,a(" Download ")],8,me)])]}),_:1},8,["data","filter-link"])):v("",!0)])):v("",!0),t(f)("User")?(o(),u("div",ce,[r.value?(o(),u("div",_e,[fe,e("a",{class:"text-primary-500 hover:underline cursor-pointer font-semibold",download:(S=r.value.file)==null?void 0:S.file_name,href:r.value.file_url,target:"_blank"},[e("div",he,[e("i",{class:j([t(U)((F=r.value.file)==null?void 0:F.mime_type),"text-2xl text-primary-500"])},null,2),e("span",ve,i(($=r.value.file)==null?void 0:$.file_name),1)])],8,pe)])):(o(),u(N,{key:1},[(o(),T(q,{id:`${t(s).id}-id`,key:`${t(s).id}-key`,ref:"image_uploader",modelValue:t(s).file,"onUpdate:modelValue":[_[0]||(_[0]=n=>t(s).file=n),_[1]||(_[1]=n=>t(s).clearErrors("file"))],placeholder:"Drop or select document file here","model-files":t(s).file_url,onRemoveFile:H,"error-messages":t(s).errors.file},null,8,["id","modelValue","model-files","error-messages"])),c(C,{onClick:L,disabled:t(s).processing||!t(s).file,class:"",variant:"flat",color:"primary"},{default:d(()=>[a(" Submit Document ")]),_:1},8,["disabled"])],64))])):v("",!0)])])]}),_:1})],64)}}};export{Ne as default};
