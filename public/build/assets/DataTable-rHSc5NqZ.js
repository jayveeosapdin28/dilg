import{o as n,g as o,b as a,d as h,t as p,a as v,w as k,N as $,n as d,u as f,i as S,F as b,z as m,f as x,O as U,P as G,j as L,m as z,Q as H,q as O,r as J,p as V,c as P,D as R}from"./app-Ds5rE3Vu.js";import{l as W}from"./lodash-B_KPkCMw.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=e=>(U("data-v-9f72af49"),e=e(),G(),e),Y={class:"block font-semibold text-lg sm:flex items-center text-center justify-between pt-0 text-accent","aria-label":"Table navigation"},Z={class:"text-sm text-primary-500"},q={class:""},ee={class:""},te=N(()=>a("span",null," entries",-1)),le={class:"flex items-center justify-center gap-1 h-8 text-sm"},ae=N(()=>a("i",{class:"bi bi-chevron-left"},null,-1)),re={key:0},se=N(()=>a("i",{class:"bi bi-chevron-right"},null,-1)),ne={__name:"Pagination",props:{links:{type:Array,default:0},next_page_url:{type:String,default:null},current_page:{type:Number,default:null},prev_page_url:{type:String,default:null},total:{type:Number,default:null},from:{type:Number,default:null},to:{type:Number,default:null},preserveScroll:{type:Boolean}},setup(e){const u=e,r=l=>{const y=parseInt(u.current_page);return Math.abs(l-y)<=2||l===1||l===parseInt(u.total)};return(l,y)=>(n(),o("nav",Y,[a("span",Z,[h("Showing "),a("span",q,p(`${e.from} to ${e.to}`),1),h(" of "),a("span",ee,p(e.total),1),te]),a("nav",null,[a("ul",le,[a("li",null,[v(f(S),{style:$({"pointer-events":e.prev_page_url==null?"none":"auto"}),href:e.prev_page_url,class:d(["flex text-accent items-center rounded-full justify-center link px-3 h-8 w-8 ml-0 leading-tight bg-white hover:text-white hover:bg-primary-300 border border-primary-300",{"text-primary-200":!e.prev_page_url}]),"preserve-scroll":e.preserveScroll},{default:k(()=>[ae]),_:1},8,["style","href","class","preserve-scroll"])]),(n(!0),o(b,null,m(e.links,c=>(n(),o(b,{key:c.label},[!isNaN(c.label)&&r(c.label)?(n(),o("li",re,[v(f(S),{href:c.url,"preserve-scroll":e.preserveScroll,class:d([{"active bg-primary-500 hover:!bg-primary-300":c.active},"flex items-center rounded-full justify-center px-4 w-8 h-8 text-primary-500 border border-primary-300 hover:bg-primary-300 hover:text-white"])},{default:k(()=>[h(p(c.label),1)]),_:2},1032,["href","preserve-scroll","class"])])):x("",!0)],64))),128)),a("li",null,[v(f(S),{style:$({"pointer-events":e.next_page_url==null?"none":"auto"}),href:e.next_page_url,class:d(["flex items-center rounded-full justify-center link px-3 h-8 w-8 ml-0 leading-tight text-primary-500 bg-white hover:text-white hover:bg-primary-300 border border-primary-500",{"text-primary-200":!e.next_page_url}]),"preserve-scroll":e.preserveScroll},{default:k(()=>[se]),_:1},8,["style","href","class","preserve-scroll"])])])])]))}},oe=X(ne,[["__scopeId","data-v-9f72af49"]]),ie={class:""},ce={key:0,class:"mb-4 flex justify-between items-center"},ue={class:"min-w-72"},de={class:"rounded border-b"},fe=["align","onClick"],ye={key:0},ge=a("td",{colspan:"99",class:"text-center py-6 px-3 text-sm text-gray-600"},[a("div",{class:"flex justify-center items-center"},[a("div",{class:""},[a("img",{class:"w-[10rem] opacity-40",src:"/img/default/empty-box.png"}),a("p",{class:"text-gray-300 text-lg mt-3"},"Data not found")])])],-1),he=[ge],pe={class:"even:bg-primary-50 rounded hover:bg-primary-100"},be=["align"],ve={class:"mt-8"},we={__name:"DataTable",props:{columns:Array,data:Object,searchable:{type:Boolean,default:!0},modelValue:String,withPagination:{type:Boolean,default:!0},searchPlaceholder:{type:String,default:"Search"},filterLink:String},setup(e){var D,B,C,I,F;const u=e;L(null);const r=z(()=>H().props.request);let l=L({query:((D=r==null?void 0:r.value)==null?void 0:D.query)??null,order_by:((B=r==null?void 0:r.value)==null?void 0:B.order_by)??null,sort_by:((C=r==null?void 0:r.value)==null?void 0:C.sort_by)??null,pages:((I=r==null?void 0:r.value)==null?void 0:I.pages)??10,page:((F=r==null?void 0:r.value)==null?void 0:F.page)??null});const y=async()=>{let t={...l.value};await M(t),R.get(u.filterLink,t,{preserveState:!0,preserveScroll:!0})},c=(t,i)=>{_(),i||(t===l.value.sort_by?l.value.order_by=l.value.order_by=="asc"?"desc":"asc":(l.value.sort_by=t,l.value.order_by="asc"),j())};z({set:t=>{emit("update:modelValue",t)},get:()=>u.modelValue});const Q=t=>t===l.value.sort_by?`sorted-${l.value.order_by}`:"",K=()=>l.value.order_by==="asc"?"bi bi-arrow-up":"bi bi-arrow-down";function M(t){for(const i in t)(Array.isArray(t[i])&&t[i].length===0||t[i]===null||t[i]==="")&&delete t[i]}const _=()=>{l.value.page=1},j=W.debounce((t,i)=>{y(),_()},100);return O(l,(t,i)=>{j()},{deep:!0}),O(()=>u.modelValue,(t,i)=>{Object.keys(l.value).forEach(w=>{l.value[w]=null}),y(),_()}),(t,i)=>{var T,A,E;const w=J("VTextField");return n(),o("div",ie,[e.searchable?(n(),o("div",ce,[a("div",ue,[v(w,{variant:"outlined",density:"compact",clearable:"",color:"primary",modelValue:f(l).query,"onUpdate:modelValue":i[0]||(i[0]=s=>f(l).query=s),label:e.searchPlaceholder},null,8,["modelValue","label"])]),V(t.$slots,"table-toolbar")])):x("",!0),a("table",{class:d(["w-full",{"h-[calc(30vh)]":e.data&&((T=e.data.data)==null?void 0:T.length)<1}])},[a("thead",de,[(n(!0),o(b,null,m(e.columns,s=>(n(),o("th",{align:s.align?s.align:"left",class:d(["text-sm font-semibold uppercase cursor-pointer text-gray-500 p-3",Q(s.field)]),style:$({width:s.width??null}),onClick:g=>s.sortable!=="No"?c(s.field,s.prevent_sort):null},[f(l).sort_by===s.field&&!s.prevent_sort?(n(),o("i",{key:0,class:d(K())},null,2)):x("",!0),h(" "+p(s.label),1)],14,fe))),256)),V(t.$slots,"table-header")]),a("tbody",null,[e.data&&((A=e.data.data)==null?void 0:A.length)<1?(n(),o("tr",ye,he)):(n(!0),o(b,{key:1},m(e.data.data,s=>(n(),o("tr",pe,[(n(!0),o(b,null,m(e.columns,g=>(n(),o("td",{align:g.align?g.align:"left",class:"p-3 text-sm text-gray-600"},[V(t.$slots,`column_${g.field}`,{props:s},()=>[h(p(s[g.field]),1)])],8,be))),256))]))),256))])],2),a("div",ve,[e.data&&((E=e.data.data)==null?void 0:E.length)>0&&e.withPagination?(n(),P(oe,{key:0,total:e.data.total??0,from:e.data.from??0,to:e.data.to??0,links:e.data.links??[],current_page:e.data.current_page??null,next_page_url:e.data.next_page_url??"#",prev_page_url:e.data.prev_page_url??"#"},null,8,["total","from","to","links","current_page","next_page_url","prev_page_url"])):x("",!0)])])}}};export{we as _};
