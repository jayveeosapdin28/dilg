import{r as x,O as b,c as M,s as V,p as q,a as B,b as k}from"./filepond-plugin-image-preview.esm-CI_uTiYr.js";import{H as F,j as _,m as y,q as C,o as u,g as p,b as O,d as R,t as S,f as P,a as A,u as N,Q as I}from"./app-C9HRCpWf.js";/*!
 * vue-filepond v7.0.4
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2023 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const D=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],H=V(),L=n=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[n],d={},h=[],m=[];let U={};const K=(...n)=>{x(...n),h.length=0;for(const e in b){if(/^on/.test(e)){h.push(e);continue}let s=[String,L(b[e])];e=="labelFileProcessingError"&&s.push(Function),d[e]={type:s,default:void 0}}return{name:"FilePond",props:d,render(){const e=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((s,[t,o])=>(o!==void 0&&(s[t]=o),s),{});return F("div",{class:{"filepond--wrapper":!0}},[F("input",e)])},created(){this.watchers=Object.keys(d).map(e=>this.$watch(e,s=>{this._pond&&(this._pond[e]=s)}))},mounted(){if(!H)return;this._element=this.$el.querySelector("input");const e=h.reduce((t,o)=>(t[o]=(...r)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(o.substr(2),...r)},t),{}),s={};Object.keys(d).forEach(t=>{this[t]!==void 0&&(s[t]=this[t])}),this._pond=M(this._element,Object.assign({},U,e,s)),Object.keys(this._pond).filter(t=>!D.includes(t)).forEach(t=>{this[t]=this._pond[t]}),m.push(this._pond)},beforeUnmount(){const{detached:e}=this.$options;if(!this.$el.offsetParent){e.call(this);return}const s=(o,r)=>{const l=((o[0]||{}).removedNodes||[])[0];!l||!l.contains(this.$el)||(r.disconnect(),e.call(this))};new MutationObserver(s).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(s=>s()),!this._pond)return;this._pond.destroy();const e=m.indexOf(this._pond);e>=0&&m.splice(e,1),this._pond=null}}},Q={class:"mb-2"},X={key:0,class:"text-red-500"},z={key:0},G={class:"text-red-500"},Y={__name:"FileUploader",props:{modelValue:String,modelFiles:String,error:String,label:{type:String},name:String,placeholder:{type:String,default:"Drop or select file here"},required:Boolean,errorMessages:String},emits:["update:modelValue","update:modelFile","revert-file","remove-file"],setup(n,{expose:e,emit:s}){const t=n,o=s,r=_(null),c=y({set:i=>{o("update:modelValue",i)},get:()=>t.modelValue}),l=y({set:i=>{o("update:modelFile",i)},get:()=>t.modelFiles});C(()=>l.value,()=>{c.value&&(r.value=null,g())});const $=K(k,B,q),f=_(null),w=()=>{l.value?setTimeout(()=>{r.value=[{source:l.value,options:{type:"local",metadata:{poster:l.value}}}]},100):r.value=null},E=i=>{c.value=i},T=(i,a,j)=>{a(),o("remove-file")},v=(i,a,j)=>{a(),o("revert-file")},g=()=>{f.value.removeFiles()};return e({resetFilePond:g}),(i,a)=>(u(),p("div",Q,[O("label",null,[R(S(n.label),1),n.required?(u(),p("span",X,"*")):P("",!0)]),A(N($),{name:"file",ref_key:"pond",ref:f,"label-idle":n.placeholder,"allow-multiple":!1,server:{timeout:7e3,process:{url:"/upload-file",method:"POST",headers:{"X-CSRF-TOKEN":N(I)().props.csrf_token},withCredentials:!1,onload:E,onerror:()=>{}},remove:T,revert:v},files:r.value,onInit:w,onRevert:v},null,8,["label-idle","server","files"]),n.errorMessages?(u(),p("div",z,[O("small",G,S(n.errorMessages),1)])):P("",!0)]))}};export{Y as _};
