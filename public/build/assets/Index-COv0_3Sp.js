import{m as H,p as I,h as j,T as Q,k as q,q as R,r as z,o as d,g as u,a as v,u as m,w as N,F as E,Q as V,Z,b as t,d as K,s as L,v as A,f as J,n as B,t as S,D as O}from"./app-D5M1G0zN.js";import{_ as P}from"./AuthenticatedLayout-BalVaEyz.js";import{u as W}from"./NavigationDrawer-BRZQ9b0p.js";import X from"./ChatForm-BVgBnsiS.js";import{_ as Y}from"./PageHeading-imx1vlLC.js";import{d as U}from"./dayjs.min-DqSkV5Vh.js";import"./useConfirmMessage-MezlQya-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var G={exports:{}};(function(D,F){(function(c,h){D.exports=h()})(H,function(){return function(c,h,_){c=c||{};var o=h.prototype,$={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function M(s,r,g,n){return o.fromToBase(s,r,g,n)}_.en.relativeTime=$,o.fromToBase=function(s,r,g,n,a){for(var y,w,f,b=g.$locale().relativeTime||$,e=c.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],T=e.length,p=0;p<T;p+=1){var l=e[p];l.d&&(y=n?_(s).diff(g,l.d,!0):g.diff(s,l.d,!0));var i=(c.rounding||Math.round)(Math.abs(y));if(f=y>0,i<=l.r||!l.r){i<=1&&p>0&&(l=e[p-1]);var C=b[l.l];a&&(i=a(""+i)),w=typeof C=="string"?C.replace("%d",i):C(i,r,l.l,f);break}}if(r)return w;var k=f?b.future:b.past;return typeof k=="function"?k(w):k.replace("%s",w)},o.to=function(s,r){return M(s,r,this,!0)},o.from=function(s,r){return M(s,r,this)};var x=function(s){return s.$u?_.utc():_()};o.toNow=function(s){return this.to(x(this),s)},o.fromNow=function(s){return this.from(x(this),s)}}})})(G);var ee=G.exports;const se=I(ee),te={class:"space-x-4"},oe=t("i",{class:"bi bi-plus mr-1"},null,-1),re={class:"h-full grid grid-cols-4 lg:grid-cols-5 mt-8 pb-24 gap-6"},ae={class:"bg-white rounded-lg border border-primary-600 shadow-lg h-full overflow-y-auto py-4 hidden lg:block"},le=["onClick"],ne=t("img",{src:"/img/default/default-user.png",class:"aspect-square w-10 rounded-full"},null,-1),ie={class:"mb-0 pb-0 leading-4 font-semibold"},de={key:1,class:"h-full max-h-full overflow-y-auto space-y-8 flex justify-center items-center text-slate-400 text-lg"},ue={class:"col-span-4 shadow-lg border rounded-lg h-full overflow-hidden flex flex-col gap-6 p-6"},me={class:"flex items-start gap-6"},ce={class:"py-2 px-4 shadow-lg rounded-lg bg-primary-100 max-w-xl"},fe={class:"text-slate-400"},pe={key:1,class:"h-full max-h-full overflow-y-auto space-y-8 flex justify-center items-center text-slate-400 text-lg"},he={key:2,class:"flex gap-6 h-16"},ge="Chat",Ve={__name:"Index",setup(D){U.extend(se);const F=j(()=>V().props.chats),c=j(()=>V().props.rooms),h=j(()=>V().props.room),{submitForm:_}=W(),o=Q({message:null,room:h.value}),$=[{name:"Chat List",href:"#",current:!0}],M=q(null),x=q(!1),s=()=>{const n=M.value;n&&n.scroll({top:n.scrollHeight,behavior:"smooth"})};R(()=>{s()});const r=()=>{_(o,"admin.chats.store",null,!1,!1)},g=n=>{O.get(route("admin.chats.show",n))};return(n,a)=>{const y=z("VBtn"),w=z("VTextField");return d(),u(E,null,[v(m(Z),{title:"Chat"}),v(X,{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=f=>x.value=f)},null,8,["modelValue"]),v(P,{class:"flex flex-col gap-y-5"},{default:N(()=>{var f,b;return[v(Y,{title:ge,pages:$},{action:N(()=>[t("div",te,[v(y,{onClick:a[1]||(a[1]=e=>x.value=!0),variant:"outlined",color:"primary"},{default:N(()=>[oe,K(" New Message ")]),_:1})])]),_:1}),t("div",re,[t("div",ae,[(f=c.value)!=null&&f.length?(d(!0),u(E,{key:0},L(c.value,e=>(d(),u("div",{onClick:T=>g(e.uuid),class:B([{"!bg-primary-100 ":h.value===e.uuid},"flex py-2 px-4 items-center gap-6 text-slate-400 hover:bg-primary-50 cursor-pointer"])},[ne,t("div",null,[t("p",ie,S(e.name),1)])],10,le))),256)):(d(),u("div",de," Chat room is empty "))]),t("div",ue,[h.value?(d(),u("div",{key:0,ref_key:"messageContainer",ref:M,class:"h-full max-h-full overflow-y-auto space-y-8"},[(d(!0),u(E,null,L(F.value,e=>{var T,p,l,i,C,k;return d(),u("div",{class:B([{"justify-end ":e.user_id===((p=(T=m(V)().props.auth)==null?void 0:T.user)==null?void 0:p.id)},"flex items-start gap-6 px-4"])},[t("div",me,[t("img",{class:B([{" order-last":e.user_id===((i=(l=m(V)().props.auth)==null?void 0:l.user)==null?void 0:i.id)},"aspect-square w-8 rounded-full"]),src:"/img/default/default-user.png"},null,2),t("div",null,[t("div",ce,S(e.message),1),t("div",{class:B({" text-right":e.user_id===((k=(C=m(V)().props.auth)==null?void 0:C.user)==null?void 0:k.id)})},[t("small",fe,S(m(U)(e.created_at).fromNow()),1)],2)])])],2)}),256))],512)):(d(),u("div",pe," Select chat room ")),(b=F.value)!=null&&b.length?(d(),u("div",he,[v(w,{color:"primary",variant:"outlined",density:"comfortable",modelValue:m(o).message,"onUpdate:modelValue":[a[2]||(a[2]=e=>m(o).message=e),a[3]||(a[3]=e=>m(o).clearErrors("message"))],"error-messages":m(o).errors.message,onKeydown:A(r,["enter"])},null,8,["modelValue","error-messages"]),v(y,{onClick:r,variant:"tonal",color:"orange",size:"large",class:"h-full mt-2"},{default:N(()=>[K("Send")]),_:1})])):J("",!0)])])]}),_:1})],64)}}};export{Ve as default};
